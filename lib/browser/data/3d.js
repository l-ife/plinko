document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35730/livereload.js?snipver=1"><\/script>'),function(){"use strict";function t(t){var e=nt.call(t,ot),n=t[ot];try{t[ot]=void 0;var r=!0}catch(t){}var o=rt.call(t);return r&&(e?t[ot]=n:delete t[ot]),o}function e(t){return at.call(t)}function n(t){return null==t?void 0===t?st:ct:lt&&lt in Object(t)?it(t):ut(t)}function r(t){return null!=t&&"object"==typeof t}function o(t){return"symbol"==typeof t||pt(t)&&dt(t)==ft}function i(t,e){if(D(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ht(t))||(vt.test(t)||!yt.test(t)||null!=e&&t in Object(e))}function a(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function u(t){if(!_t(t))return!1;var e=dt(t);return e==gt||e==xt||e==bt||e==Et}function c(t){return!!zt&&zt in t}function s(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function l(t){return!(!_t(t)||Tt(t))&&(Rt(t)?$t:St).test(Ht(t))}function d(t,e){return null==t?void 0:t[e]}function p(t,e){var n=Gt(t,e);return Ft(n)?n:void 0}function f(){this.__data__=Lt?Lt(null):{},this.size=0}function h(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function y(t){var e=this.__data__;if(Lt){var n=e[t];return n===Nt?void 0:n}return Vt.call(e,t)?e[t]:void 0}function v(t){var e=this.__data__;return Lt?void 0!==e[t]:qt.call(e,t)}function m(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Lt&&void 0===e?Xt:e,this}function _(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function b(){this.__data__=[],this.size=0}function g(t,e){return t===e||t!==t&&e!==e}function x(t,e){for(var n=t.length;n--;)if(Jt(t[n][0],e))return n;return-1}function E(t){var e=this.__data__,n=Kt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,!0)}function R(t){var e=this.__data__,n=Kt(e,t);return n<0?void 0:e[n][1]}function w(t){return Kt(this.__data__,t)>-1}function z(t,e){var n=this.__data__,r=Kt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function T(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function j(){this.size=0,this.__data__={hash:new Dt,map:new(ie||oe),string:new Dt}}function H(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function O(t,e){var n=t.__data__;return ue(e)?n["string"==typeof e?"string":"hash"]:n.map}function S(t){var e=ce(this,t).delete(t);return this.size-=e?1:0,e}function C(t){return ce(this,t).get(t)}function P(t){return ce(this,t).has(t)}function A(t,e){var n=ce(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function M(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(he);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new($.Cache||fe),n}function F(t){var e=ye(t,function(t){return n.size===ve&&n.clear(),t}),n=e.cache;return e}function G(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function k(t){if("string"==typeof t)return t;if(D(t))return xe(t,k)+"";if(ht(t))return we?we.call(t):"";var e=t+"";return"0"==e&&1/t==-Ee?"-0":e}function L(t){return null==t?"":ze(t)}function U(t,e){return D(t)?t:mt(t,e)?[t]:ge(Te(t))}function B(t){if("string"==typeof t||ht(t))return t;var e=t+"";return"0"==e&&1/t==-He?"-0":e}function N(t,e){for(var n=0,r=(e=je(e,t)).length;null!=t&&n<r;)t=t[Oe(e[n++])];return n&&n==r?t:void 0}function V(t,e,n){var r=null==t?void 0:Se(t,e);return void 0===r?n:r}function W(t){return Math.pow(t,2)}function q(t,e,n){return new THREE.Vector3(t,e,n)}function I(t,e,n,r){r=r||16;var o=document.createElement("canvas"),i=o.getContext("2d"),a=r+"px "+(n||"Arial");i.font=a;var u=i.measureText(t).width,c=Math.ceil(r);return o.width=u,o.height=c,i.font=a,i.fillStyle=e||"black",i.fillText(t,0,Math.ceil(.8*r)),o}function X(t,e,n,r,o,i){var a=I(t,e,n,r),u=new THREE.PlaneGeometry(a.width,a.height,o,i),c=new THREE.Texture(a);c.needsUpdate=!0;var s=new THREE.MeshBasicMaterial({map:c,color:16777215,transparent:!0}),l=new THREE.Mesh(u,s);return l.scale.set(.5,.5,.5),l.doubleSided=!0,l}function Y(t,e,n,r){function o(){s.clear(),d.lookAt(p.position),s.render(p,d),window.requestAnimationFrame(o,s.domElement)}function i(){for(var e=0;e<15e4&&A<t.length;e++&&A++){var n=t[A];P.geometry.vertices[A]=new THREE.Vector3(v(+Ce(n,r.x)),m(+Ce(n,r.y)),_(+Ce(n,r.z))),P.geometry.colors[A]=new THREE.Color(d3.hsl(+n.hue/255*360,1,.5,1).toString())}A<t.length&&setTimeout(i,0),P.geometry.verticesNeedUpdate=!0,P.geometry.colorsNeedUpdate=!0}var a=Pe(n,2),u=a[0],c=a[1],s=new THREE.WebGLRenderer({antialias:!0});s.setSize(u,c);var l=d3.select("body").append("div")[0][0];l.appendChild(s.domElement),s.setClearColorHex(15658734,1);var d=new THREE.PerspectiveCamera(45,u/c,1,1e4);d.position.z=300,d.position.x=0,d.position.y=100;var p=new THREE.Scene,f=new THREE.Object3D;p.add(f),f.rotation.y=0;var h={x:e[r.x],y:e[r.y],z:e[r.z]},y={x:{max:h.x[1],cen:(h.x[1]+h.x[0])/2,min:h.x[0]},y:{max:h.y[1],cen:(h.y[1]+h.y[0])/2,min:h.y[0]},z:{max:h.z[1],cen:(h.z[1]+h.z[0])/2,min:h.z[0]}},v=(d3.scale.category20c(),d3.scale.linear().domain(h.x).range([-150,150])),m=d3.scale.linear().domain(h.y).range([-50,50]),_=d3.scale.linear().domain(h.z).range([-50,50]),b=function(t,e,n){return q(v(y.x[t]),m(y.y[e]),_(y.z[n]))},g=new THREE.Geometry,x=["min","cen","max"];x.forEach(function(t){x.forEach(function(e){g.vertices.push(b("min",e,t),b("max",e,t))})}),x.forEach(function(t){x.forEach(function(e){g.vertices.push(b(e,t,"min"),b(e,t,"max"))})}),x.forEach(function(t){x.forEach(function(e){g.vertices.push(b(e,"min",t),b(e,"max",t))})});var E=new THREE.LineBasicMaterial({color:0,lineWidth:1}),R=new THREE.Line(g,E);R.type=THREE.Lines,f.add(R);var w=X("-"+r.x);w.position.x=v(y.x.min)-12,w.position.y=5,f.add(w);var z=X(Ae(h.x[0]));z.position.x=v(y.x.min)-12,z.position.y=-5,f.add(z),(w=X(r.x)).position.x=v(y.x.max)+12,w.position.y=5,f.add(w),(z=X(Ae(h.x[1]))).position.x=v(y.x.max)+12,z.position.y=-5,f.add(z);var T=X("-"+r.y);T.position.y=m(y.y.min)-5,f.add(T);var j=X(Ae(h.y[0]));j.position.y=m(y.y.min)-15,f.add(j),(T=X(r.y)).position.y=m(y.y.max)+15,f.add(T),(j=X(Ae(h.y[1]))).position.y=m(y.y.max)+5,f.add(j);var H=X("-"+r.z+" "+Ae(h.z[0]));H.position.z=_(y.z.min)+2,f.add(H),(H=X(r.z+" "+Ae(h.z[1]))).position.z=_(y.z.max)+2,f.add(H);for(var O=new THREE.ParticleBasicMaterial({vertexColors:!0,size:.5}),S=new THREE.Geometry,C=0;C<t.length;C++)S.vertices.push(new THREE.Vector3),S.colors.push(new THREE.Color);var P=new THREE.ParticleSystem(S,O);f.add(P),s.render(p,d),o();var A=0;i();var M=!1,$=0,F=0;l.onmousedown=function(t){M=!0,$=t.clientX,F=t.clientY},l.onmouseup=function(){M=!1},l.onmousemove=function(t){if(M){var e=t.clientX-$,n=t.clientY-F;Math.sqrt(W(d.position.x)+W(d.position.y)+W(d.position.z));f.rotation.y+=.01*e,f.rotation.x+=.01*n,$+=e,F+=n}}}var D=Array.isArray,Z="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},J="object"==typeof Z&&Z&&Z.Object===Object&&Z,K="object"==typeof self&&self&&self.Object===Object&&self,Q=J||K||Function("return this")(),tt=Q.Symbol,et=Object.prototype,nt=et.hasOwnProperty,rt=et.toString,ot=tt?tt.toStringTag:void 0,it=t,at=Object.prototype.toString,ut=e,ct="[object Null]",st="[object Undefined]",lt=tt?tt.toStringTag:void 0,dt=n,pt=r,ft="[object Symbol]",ht=o,yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,mt=i,_t=a,bt="[object AsyncFunction]",gt="[object Function]",xt="[object GeneratorFunction]",Et="[object Proxy]",Rt=u,wt=Q["__core-js_shared__"],zt=function(){var t=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Tt=c,jt=Function.prototype.toString,Ht=s,Ot=/[\\^$.*+?()[\]{}|]/g,St=/^\[object .+?Constructor\]$/,Ct=Function.prototype,Pt=Object.prototype,At=Ct.toString,Mt=Pt.hasOwnProperty,$t=RegExp("^"+At.call(Mt).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ft=l,Gt=d,kt=p,Lt=kt(Object,"create"),Ut=f,Bt=h,Nt="__lodash_hash_undefined__",Vt=Object.prototype.hasOwnProperty,Wt=y,qt=Object.prototype.hasOwnProperty,It=v,Xt="__lodash_hash_undefined__",Yt=m;_.prototype.clear=Ut,_.prototype.delete=Bt,_.prototype.get=Wt,_.prototype.has=It,_.prototype.set=Yt;var Dt=_,Zt=b,Jt=g,Kt=x,Qt=Array.prototype.splice,te=E,ee=R,ne=w,re=z;T.prototype.clear=Zt,T.prototype.delete=te,T.prototype.get=ee,T.prototype.has=ne,T.prototype.set=re;var oe=T,ie=kt(Q,"Map"),ae=j,ue=H,ce=O,se=S,le=C,de=P,pe=A;M.prototype.clear=ae,M.prototype.delete=se,M.prototype.get=le,M.prototype.has=de,M.prototype.set=pe;var fe=M,he="Expected a function";$.Cache=fe;var ye=$,ve=500,me=/^\./,_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,be=/\\(\\)?/g,ge=F(function(t){var e=[];return me.test(t)&&e.push(""),t.replace(_e,function(t,n,r,o){e.push(r?o.replace(be,"$1"):n||t)}),e}),xe=G,Ee=1/0,Re=tt?tt.prototype:void 0,we=Re?Re.toString:void 0,ze=k,Te=L,je=U,He=1/0,Oe=B,Se=N,Ce=V,Pe=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=d3.format("+.3f"),Me=function(t,e){return d3.extent(t,function(t){return+Ce(t,e)})};d3.csv("../data/878452Wc4n1uEFvZ.csv",function(t){console.log("data loaded");var e={birthdate:Me(t,"birthdate"),age:Me(t,"age"),position:Me(t,"position"),ballRadius:Me(t,"ballRadius"),"mutationRate:ballRadius":Me(t,"mutationRate:ballRadius"),generation:Me(t,"generation"),hue:Me(t,"hue"),restitution:Me(t,"restitution")};Y(t,e,[1250,700],{x:"age",y:"ballRadius",z:"position"}),Y(t,e,[1250,700],{x:"age",y:"mutationRate:position",z:"position"}),Y(t,e,[1250,700],{x:"age",y:"mutationRate:ballRadius",z:"ballRadius"}),Y(t,e,[1250,700],{x:"age",y:"mutationRate:restitution",z:"restitution"}),Y(t,e,[1250,700],{x:"age",y:"ballRadius",z:"restitution"}),Y(t,e,[1250,700],{x:"birthdate",y:"ballRadius",z:"position"}),Y(t,e,[1250,700],{x:"birthdate",y:"age",z:"position"}),Y(t,e,[1250,700],{x:"birthdate",y:"age",z:"ballRadius"}),Y(t,e,[1250,700],{x:"birthdate",y:"mutationRate:ballRadius",z:"ballRadius"}),Y(t,e,[1250,700],{x:"birthdate",y:"mutationRate:ballRadius",z:"restitution"}),Y(t,e,[1250,700],{x:"birthdate",y:"mutationRate:ballRadius",z:"position"}),Y(t,e,[1250,700],{x:"birthdate",y:"age",z:"mutationRate:ballRadius"})})}();
//# sourceMappingURL=3d.js.map
