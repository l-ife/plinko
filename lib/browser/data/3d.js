document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"><\/script>'),function(){"use strict";function t(t){return Math.pow(t,2)}function e(t,e,n){return new THREE.Vector3(t,e,n)}function n(t,e,n,i){i=i||16;var o=document.createElement("canvas"),a=o.getContext("2d"),r=i+"px "+(n||"Arial");a.font=r;var s=a.measureText(t).width,c=Math.ceil(i);return o.width=s,o.height=c,a.font=r,a.fillStyle=e||"black",a.fillText(t,0,Math.ceil(.8*i)),o}function i(t,e,i,o,a,r){var s=n(t,e,i,o),c=new THREE.PlaneGeometry(s.width,s.height,a,r),d=new THREE.Texture(s);d.needsUpdate=!0;var l=new THREE.MeshBasicMaterial({map:d,color:16777215,transparent:!0}),u=new THREE.Mesh(c,l);return u.scale.set(.5,.5,.5),u.doubleSided=!0,u}function o(n,o,s,c){function d(){p.clear(),h.lookAt(E.position),p.render(E,h),window.requestAnimationFrame(d,p.domElement)}function l(){for(var t=0;t<15e4&&k<n.length;t++&&k++){var e=n[k];V.geometry.vertices[k]=new THREE.Vector3(w(+e[c.x]),z(+e[c.y]),T(+e[c.z])),V.geometry.colors[k]=new THREE.Color(d3.hsl(+e.hue/255*360,1,.5,1).toString())}k<n.length&&setTimeout(l,0),V.geometry.verticesNeedUpdate=!0,V.geometry.colorsNeedUpdate=!0}var u=a(s,2),m=u[0],y=u[1],p=new THREE.WebGLRenderer({antialias:!0});p.setSize(m,y);var x=d3.select("body").append("div")[0][0];x.appendChild(p.domElement),p.setClearColorHex(15658734,1);var h=new THREE.PerspectiveCamera(45,m/y,1,1e4);h.position.z=300,h.position.x=0,h.position.y=100;var E=new THREE.Scene,f=new THREE.Object3D;E.add(f),f.rotation.y=0;var v={x:o[c.x],y:o[c.y],z:o[c.z]},R={x:{max:v.x[1],cen:(v.x[1]+v.x[0])/2,min:v.x[0]},y:{max:v.y[1],cen:(v.y[1]+v.y[0])/2,min:v.y[0]},z:{max:v.z[1],cen:(v.z[1]+v.z[0])/2,min:v.z[0]}},w=(d3.scale.category20c(),d3.scale.linear().domain(v.x).range([-150,150])),z=d3.scale.linear().domain(v.y).range([-50,50]),T=d3.scale.linear().domain(v.z).range([-50,50]),g=function(t,n,i){return e(w(R.x[t]),z(R.y[n]),T(R.z[i]))},b=new THREE.Geometry,H=["min","cen","max"];H.forEach(function(t){H.forEach(function(e){b.vertices.push(g("min",e,t),g("max",e,t))})}),H.forEach(function(t){H.forEach(function(e){b.vertices.push(g(e,t,"min"),g(e,t,"max"))})}),H.forEach(function(t){H.forEach(function(e){b.vertices.push(g(e,"min",t),g(e,"max",t))})});var M=new THREE.LineBasicMaterial({color:0,lineWidth:1}),C=new THREE.Line(b,M);C.type=THREE.Lines,f.add(C);var S=i("-"+c.x);S.position.x=w(R.x.min)-12,S.position.y=5,f.add(S);var A=i(r(v.x[0]));A.position.x=w(R.x.min)-12,A.position.y=-5,f.add(A),(S=i(c.x)).position.x=w(R.x.max)+12,S.position.y=5,f.add(S),(A=i(r(v.x[1]))).position.x=w(R.x.max)+12,A.position.y=-5,f.add(A);var G=i("-"+c.y);G.position.y=z(R.y.min)-5,f.add(G);var L=i(r(v.y[0]));L.position.y=z(R.y.min)-15,f.add(L),(G=i(c.y)).position.y=z(R.y.max)+15,f.add(G),(L=i(r(v.y[1]))).position.y=z(R.y.max)+5,f.add(L);var P=i("-"+c.z+" "+r(v.z[0]));P.position.z=T(R.z.min)+2,f.add(P),(P=i(c.z+" "+r(v.z[1]))).position.z=T(R.z.max)+2,f.add(P);for(var j=new THREE.ParticleBasicMaterial({vertexColors:!0,size:.5}),B=new THREE.Geometry,U=0;U<n.length;U++)B.vertices.push(new THREE.Vector3),B.colors.push(new THREE.Color);var V=new THREE.ParticleSystem(B,j);f.add(V),p.render(E,h),d();var k=0;l();var q=!1,N=0,O=0;x.onmousedown=function(t){q=!0,N=t.clientX,O=t.clientY},x.onmouseup=function(){q=!1},x.onmousemove=function(e){if(q){var n=e.clientX-N,i=e.clientY-O;Math.sqrt(t(h.position.x)+t(h.position.y)+t(h.position.z));f.rotation.y+=.01*n,f.rotation.x+=.01*i,N+=n,O+=i}}}var a=function(){function t(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=d3.format("+.3f"),s=function(t,e){return d3.extent(t,function(t){return+t[e]})};d3.csv("../data/thebigone.csv",function(t){console.log("data loaded");var e={birthdate:s(t,"birthdate"),age:s(t,"age"),position:s(t,"position"),ballRadius:s(t,"ballRadius"),mutationRate:s(t,"mutationRate"),generation:s(t,"generation"),hue:s(t,"hue"),restitution:s(t,"restitution")};o(t,e,[1250,700],{x:"birthdate",y:"ballRadius",z:"position"}),o(t,e,[1250,700],{x:"birthdate",y:"age",z:"position"}),o(t,e,[1250,700],{x:"birthdate",y:"mutationRate",z:"ballRadius"}),o(t,e,[1250,700],{x:"birthdate",y:"mutationRate",z:"restitution"}),o(t,e,[1250,700],{x:"birthdate",y:"mutationRate",z:"position"}),o(t,e,[1250,700],{x:"birthdate",y:"age",z:"mutationRate"})})}();
//# sourceMappingURL=3d.js.map
